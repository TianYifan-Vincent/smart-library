<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.lib.mapper.bookCategoryMapper">
    <resultMap id="BaseResultMap" type="com.lib.entity.bookCategory">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Tue Jul 05 13:25:15 CST 2022.
        -->
        <id column="id" jdbcType="INTEGER" property="id" />
        <result column="category_name" jdbcType="VARCHAR" property="categoryName" />
    </resultMap>

    <!-- List<bookCategory> selectAll(); -->
    <select id="selectAll" resultMap="BaseResultMap">
        select * from book_category

    </select>

    <!-- List<bookCategory> selectAllByKeyWord(@Param("keyWord") String keyWord); -->
    <select id="selectAllByKeyWord" resultMap="BaseResultMap">
        select * from book_category
        <where>
            <if test="keyWord != '' and keyWord != 'null'">
                (category_name like '%${keyWord}%')
            </if>
        </where>
    </select>

    <!-- int updateNameById(@Param("categoryName") String categoryName,@Param("id") Integer id); -->
    <update id="updateNameById">
        update book_category set
            category_name = #{categoryName}
        where id = #{id}
    </update>

    <!-- int insert(BookC); -->
    <insert id="insert" >
        <selectKey keyProperty="id" order="BEFORE" resultType="int">
            SELECT IFNULL((SELECT max(id) FROM book_category)+1, 1) as id
        </selectKey>

        insert into book_category(id,category_name) values
        (#{id},#{categoryName})
    </insert>

    <!-- int deleteByPrimaryKey(Integer id); -->
    <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Tue Jul 05 13:25:15 CST 2022.
        -->
        delete from book_category
        where id = #{id,jdbcType=INTEGER}
    </delete>
</mapper>